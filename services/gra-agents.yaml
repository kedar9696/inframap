- defaultTab: nodes
  description: Install or Uninstall gra-agents online or offline
  executionEnabled: true
  group: services
  id: c463db99-e448-4327-b9e6-14982b1ccaf4
  loglevel: INFO
  name: gra-agents
  nodeFilterEditable: false
  nodefilters:
    dispatch:
      excludePrecedence: true
      keepgoing: false
      rankOrder: ascending
      successOnEmptyNodeFilter: false
      threadcount: '1'
    filter: 'tags: gra_agents_hosts'
  nodesSelectedByDefault: true
  options:
  - enforced: true
    label: Action
    name: action
    required: true
    sortValues: true
    value: install
    valuesUrl: file:${globals.gra-playbooks-path}/rundeck/options/action.json
  - enforced: true
    label: deploymentType
    name: deploymentType
    value: gra-services
    valuesUrl: file:${globals.gra-playbooks-path}/rundeck/options/deploymentType.json
  - description: Installation Type
    enforced: true
    label: installationType
    name: installationType
    required: true
    value: online
    valuesUrl: file:${globals.gra-playbooks-path}/rundeck/options/installationType.json
  - label: Version
    name: version
    value: 11.1.0
  - description: Build Number of artifact e.g.240215453
    label: Build Number
    name: build_no
  plugins:
    ExecutionLifecycle: null
  scheduleEnabled: true
  sequence:
    commands:
    - configuration:
        ansible-base-dir-path: ${globals.gra-playbooks-path}
        ansible-become: 'false'
        ansible-disable-limit: 'false'
        ansible-extra-vars: "operation: ${option.action} \nmode: ${option.installationType}\
          \ \nartifact_build_ver: ${option.version} \nbuild_no: ${option.build_no}\n\
          deployment_type: ${option.deploymentType}"
        ansible-playbook: playbook-gra-agents.yml
        ansible-ssh-passphrase-option: option.password
        ansible-ssh-use-agent: 'false'
      nodeStep: false
      type: com.batix.rundeck.plugins.AnsiblePlaybookWorkflowStep
    keepgoing: false
    strategy: node-first
  uuid: c463db99-e448-4327-b9e6-14982b1ccaf4

